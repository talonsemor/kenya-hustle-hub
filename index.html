<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Kenya Hustle Hub â€” Home</title>
  <link rel="stylesheet" href="css/styles.css">
  <link rel="stylesheet" href="css/discovery.css">
</head>
<body class="dark">
  <div id="app">
    <header class="site-header">
      <div class="brand">
        <button id="menuBtn" class="menu-btn" aria-label="Open menu">
          <span></span><span></span><span></span>
        </button>
        <a class="logo" href="#">Kenya Hustle Hub</a>
      </div>
      <div class="header-actions">
        <input id="search" type="search" placeholder="Search hustles, scholarships, online jobs..." aria-label="Search">
        <button id="searchBtn" class="btn">Search</button>
        <button id="refreshBtn" class="btn">Refresh</button>
      </div>
    </header>

    <aside id="sideNav" class="side-nav" aria-hidden="true">
      <div class="side-inner">
        <h2>Menu</h2>
        <nav class="nav-list">
          <a href="#" data-cat="all" class="nav-item active">All</a>
          <a href="about.html" class="nav-item">About</a>
          <a href="submit.html" class="nav-item">Submit Hustle</a>
        </nav>

        <div class="side-footer">
          <div class="theme-row">
            <label for="themeToggle">Theme</label>
            <button id="themeToggle" class="theme-toggle" role="switch" aria-checked="false" aria-label="Toggle color theme" title="Toggle light/dark theme">
              <span class="toggle-knob" aria-hidden="true"></span>
            </button>
          </div>
        </div>
      </div>
    </aside>

    <main class="main">
      <section class="hero">
        <div class="hero-bg" aria-hidden="true"></div>
        <div class="hero-overlay">
          <div class="hero-inner">
            <h1>Find real hustles & income opportunities  updated daily</h1>
            <p class="lead">Verified listings, grants, tenders and online jobs for Kenyans. Fast, mobile-first and free.</p>
            <div class="hero-cta">
              <button id="exploreBtn" class="btn primary">Explore Hustles</button>
              <a id="learnMore" class="btn ghost" href="#listings">How it works</a>
            </div>
          </div>
        </div>
      </section>

      <!-- Modern Affiliate Box (after hero, replaces weather widget) -->
      <section class="affiliate-wrapper wrap" aria-label="Sponsored offer">
        <div id="affiliate-modern-box" class="card" style="margin-top:0;box-shadow:0 8px 32px rgba(14,30,80,0.10);border-radius:16px;background:linear-gradient(135deg,#f6f9ff 0%,#e0e7ff 100%);padding:18px 16px;max-width:340px;">
          <div style="display:flex;align-items:center;gap:16px;">
            <img src="assets/affiliate-placeholder.png" alt="Partner logo" style="width:60px;height:60px;border-radius:12px;object-fit:cover;box-shadow:0 2px 8px rgba(14,30,80,0.10);background:#fff;" onerror="this.style.display='none'">
            <div>
              <p style="font-weight:700;font-size:17px;margin:0 0 4px 0;color:#0b1220;">Partner Offer â€” Earn More</p>
              <p style="font-size:13px;color:#475569;margin:0;">Curated for Kenya Hustle Hub users</p>
            </div>
          </div>
          <p style="margin:16px 0 0 0;font-size:14px;color:#334155;">Discover exclusive cashback, sign-up bonuses, and smart tools to grow your side income. Trusted by thousands of Kenyans.</p>
          <div style="display:flex;gap:10px;margin-top:16px;">
            <a href="https://example.com/?ref=kenyahustlehub" target="_blank" rel="noopener noreferrer" style="flex:1;padding:12px 0;border-radius:10px;background:#0b5fff;color:#fff;font-weight:700;text-align:center;text-decoration:none;box-shadow:0 2px 8px rgba(11,95,255,0.10);">See Offer</a>
            <a href="https://example.com/learn-more" target="_blank" rel="noopener noreferrer" style="flex:1;padding:12px 0;border-radius:10px;background:transparent;border:1px solid #0b5fff;color:#0b5fff;font-weight:700;text-align:center;text-decoration:none;">Learn more</a>
          </div>
          <div style="font-size:12px;color:#64748b;margin-top:12px;text-align:center;">We may receive commission for referrals. <a href="/about.html" style="color:inherit;text-decoration:underline">Learn more</a></div>
        </div>
      </section>

      <!-- Discovery Widget removed here to avoid duplication (kept inside listings feed-column) -->

      <section id="listings" class="content wrap">
        <div class="controls card">
          <div class="filters">
            <div class="tabs" id="categoryTabs"></div>
            <select id="sourceFilter"><option value="all">All sources</option></select>
          </div>
          <div class="info small">Auto-updates from public feeds.</div>
        </div>

        <div class="layout">
          <div class="feed-column">
            <div id="items" class="items grid-small"></div>
            <!-- Discovery Widget - BBC News, Sports, Crypto Feeds (moved between feed 2 and 3) -->
            <section class="discovery-wrapper wrap" aria-label="Discovery feeds">
              <div class="discovery-box card">
                <h2 class="discovery-title">ðŸŽ¯ Discovery</h2>
                <div class="discovery-grid" id="discoveryGrid">
                  <!-- News Feed Card -->
                  <div class="discovery-card news-card" data-feed="news">
                    <div class="discovery-header">
                      <span class="feed-icon">ðŸ“°</span>
                      <h3>BBC News</h3>
                    </div>
                    <div class="discovery-content" id="newsContent">
                      <div class="skeleton" style="will-change:opacity"></div>
                      <div class="skeleton" style="will-change:opacity"></div>
                    </div>
                  </div>

                  <!-- Sports Feed Card -->
                  <div class="discovery-card sports-card" data-feed="sports">
                    <div class="discovery-header">
                      <span class="feed-icon">âš½</span>
                      <h3>BBC Sport</h3>
                    </div>
                    <div class="discovery-content" id="sportsContent">
                      <div class="skeleton" style="will-change:opacity"></div>
                      <div class="skeleton" style="will-change:opacity"></div>
                    </div>
                  </div>

                  <!-- Crypto Feed Card -->
                  <div class="discovery-card crypto-card" data-feed="crypto">
                    <div class="discovery-header">
                      <span class="feed-icon">â‚¿</span>
                      <h3>Crypto News</h3>
                    </div>
                    <div class="discovery-content" id="cryptoContent">
                      <div class="skeleton" style="will-change:opacity"></div>
                      <div class="skeleton" style="will-change:opacity"></div>
                    </div>
                  </div>
                </div>
              </div>
            </section>
            <div class="pager"><button id="loadMore" class="btn">Load more</button></div>
          </div>

          <aside class="sidebar card">
            <h3>Sources</h3>
            <div id="sources" class="sources"></div>

            <h3 style="margin-top:16px">Quick Tags</h3>
            <div id="quickTags" class="tags"></div>

            <!-- Modern Affiliate Box (single, updated design) -->
            <div id="affiliate-modern-box" aria-label="Sponsored offer" style="margin-top:18px;box-shadow:0 8px 32px rgba(14,30,80,0.10);border-radius:16px;background:linear-gradient(135deg,#f6f9ff 0%,#e0e7ff 100%);padding:18px 16px;max-width:340px;">
              <div style="display:flex;align-items:center;gap:16px;">
                <img src="assets/affiliate-placeholder.png" alt="Partner logo" style="width:60px;height:60px;border-radius:12px;object-fit:cover;box-shadow:0 2px 8px rgba(14,30,80,0.10);background:#fff;" onerror="this.style.display='none'">
                <div>
                  <p style="font-weight:700;font-size:17px;margin:0 0 4px 0;color:#0b1220;">Partner Offer â€” Earn More</p>
                  <p style="font-size:13px;color:#475569;margin:0;">Curated for Kenya Hustle Hub users</p>
                </div>
              </div>
              <p style="margin:16px 0 0 0;font-size:14px;color:#334155;">Discover exclusive cashback, sign-up bonuses, and smart tools to grow your side income. Trusted by thousands of Kenyans.</p>
              <div style="display:flex;gap:10px;margin-top:16px;">
                <a href="https://example.com/?ref=kenyahustlehub" target="_blank" rel="noopener noreferrer" style="flex:1;padding:12px 0;border-radius:10px;background:#0b5fff;color:#fff;font-weight:700;text-align:center;text-decoration:none;box-shadow:0 2px 8px rgba(11,95,255,0.10);">See Offer</a>
                <a href="https://example.com/learn-more" target="_blank" rel="noopener noreferrer" style="flex:1;padding:12px 0;border-radius:10px;background:transparent;border:1px solid #0b5fff;color:#0b5fff;font-weight:700;text-align:center;text-decoration:none;">Learn more</a>
              </div>
              <div style="font-size:12px;color:#64748b;margin-top:12px;text-align:center;">We may receive commission for referrals. <a href="/about.html" style="color:inherit;text-decoration:underline">Learn more</a></div>
            </div>
          </aside>
        </div>
      </section>

      <footer class="site-footer">
        <div class="wrap">
          <p> 2025 Kenya Hustle Hub  All Rights Reserved</p>
        </div>
      </footer>
    </main>

    <div id="loader" class="loader"><div class="spinner"></div></div>
  </div>

  <script type="module" src="js/app.js" defer></script>
  <script src="js/discovery.js" defer></script>
  <script>
  !function(d,s,id){
    var js,fjs=d.getElementsByTagName(s)[0];
    if(!d.getElementById(id)){
      js=d.createElement(s);
      js.id=id;
      js.src='https://weatherwidget.io/js/widget.min.js';
      fjs.parentNode.insertBefore(js,fjs);
    }
  }(document,'script','weatherwidget-io-js');

  // Fallback: if widget doesn't initialize, show a simple link so users still get the forecast
  (function(){
    function showFallback(){
      var box = document.querySelector('.weather-box');
      if(!box) return;
      var hasIframe = !!box.querySelector('iframe');
      if(hasIframe) return;
      var link = '<h4 class="small" style="margin:0 0 8px 0">Weather</h4>' +
                 '<p class="small">Weather widget failed to load. ' +
                 '<a href="https://forecast7.com/en/1d29n36d82/nairobi/" target="_blank" rel="noopener noreferrer">Open forecast for Nairobi</a></p>';
      box.innerHTML = link;
    }
    setTimeout(showFallback, 1400);
    setTimeout(showFallback, 4000);
  })();
  </script>
</body>
</html>
